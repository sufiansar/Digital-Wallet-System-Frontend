import{r as n,j as e,M as X,N as G,O as S,Q as K,R as w,T as B,V as U,X as $,Y as J,Z as Q,_ as V,C as Y,c as Z,d as W,e as ee,$ as j,I as P,a0 as te,B as re,t as R}from"./index-DTLdg1Qi.js";var y="Checkbox",[ae,de]=X(y),[se,_]=ae(y);function ne(r){const{__scopeCheckbox:o,checked:i,children:l,defaultChecked:c,disabled:t,form:f,name:b,onCheckedChange:d,required:x,value:m="on",internal_do_not_use_render:u}=r,[h,v]=K({prop:i,defaultProp:c??!1,onChange:d,caller:y}),[a,g]=n.useState(null),[C,s]=n.useState(null),p=n.useRef(!1),I=a?!!f||!!a.closest("form"):!0,E={checked:h,disabled:t,setChecked:v,control:a,setControl:g,name:b,form:f,value:m,hasConsumerStoppedPropagationRef:p,required:x,defaultChecked:k(c)?!1:c,isFormControl:I,bubbleInput:C,setBubbleInput:s};return e.jsx(se,{scope:o,...E,children:oe(u)?u(E):l})}var T="CheckboxTrigger",F=n.forwardRef(({__scopeCheckbox:r,onKeyDown:o,onClick:i,...l},c)=>{const{control:t,value:f,disabled:b,checked:d,required:x,setControl:m,setChecked:u,hasConsumerStoppedPropagationRef:h,isFormControl:v,bubbleInput:a}=_(T,r),g=w(c,m),C=n.useRef(d);return n.useEffect(()=>{const s=t?.form;if(s){const p=()=>u(C.current);return s.addEventListener("reset",p),()=>s.removeEventListener("reset",p)}},[t,u]),e.jsx(S.button,{type:"button",role:"checkbox","aria-checked":k(d)?"mixed":d,"aria-required":x,"data-state":A(d),"data-disabled":b?"":void 0,disabled:b,value:f,...l,ref:g,onKeyDown:B(o,s=>{s.key==="Enter"&&s.preventDefault()}),onClick:B(i,s=>{u(p=>k(p)?!0:!p),a&&v&&(h.current=s.isPropagationStopped(),h.current||s.stopPropagation())})})});F.displayName=T;var q=n.forwardRef((r,o)=>{const{__scopeCheckbox:i,name:l,checked:c,defaultChecked:t,required:f,disabled:b,value:d,onCheckedChange:x,form:m,...u}=r;return e.jsx(ne,{__scopeCheckbox:i,checked:c,defaultChecked:t,disabled:b,required:f,onCheckedChange:x,name:l,form:m,value:d,internal_do_not_use_render:({isFormControl:h})=>e.jsxs(e.Fragment,{children:[e.jsx(F,{...u,ref:o,__scopeCheckbox:i}),h&&e.jsx(O,{__scopeCheckbox:i})]})})});q.displayName=y;var M="CheckboxIndicator",D=n.forwardRef((r,o)=>{const{__scopeCheckbox:i,forceMount:l,...c}=r,t=_(M,i);return e.jsx(G,{present:l||k(t.checked)||t.checked===!0,children:e.jsx(S.span,{"data-state":A(t.checked),"data-disabled":t.disabled?"":void 0,...c,ref:o,style:{pointerEvents:"none",...r.style}})})});D.displayName=M;var L="CheckboxBubbleInput",O=n.forwardRef(({__scopeCheckbox:r,...o},i)=>{const{control:l,hasConsumerStoppedPropagationRef:c,checked:t,defaultChecked:f,required:b,disabled:d,name:x,value:m,form:u,bubbleInput:h,setBubbleInput:v}=_(L,r),a=w(i,v),g=U(t),C=$(l);n.useEffect(()=>{const p=h;if(!p)return;const I=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(I,"checked").set,z=!c.current;if(g!==t&&N){const H=new Event("click",{bubbles:z});p.indeterminate=k(t),N.call(p,k(t)?!1:t),p.dispatchEvent(H)}},[h,g,t,c]);const s=n.useRef(k(t)?!1:t);return e.jsx(S.input,{type:"checkbox","aria-hidden":!0,defaultChecked:f??s.current,required:b,disabled:d,name:x,value:m,form:u,...o,tabIndex:-1,ref:a,style:{...o.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});O.displayName=L;function oe(r){return typeof r=="function"}function k(r){return r==="indeterminate"}function A(r){return k(r)?"indeterminate":r?"checked":"unchecked"}function ce({className:r,...o}){return e.jsx(q,{"data-slot":"checkbox",className:J("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...o,children:e.jsx(D,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:e.jsx(Q,{className:"size-3.5"})})})}const le=({onSuccess:r})=>{const[o,i]=n.useState(""),[l,c]=n.useState(""),[t,f]=n.useState(""),[b,d]=n.useState(!1),[x,m]=n.useState(null),[u,{isLoading:h}]=V(),v=async a=>{if(a.preventDefault(),!x){R.error("Please select a cover image");return}const g={title:o,content:l,tags:t.split(",").map(s=>s.trim()).filter(Boolean),published:b},C=new FormData;C.append("data",JSON.stringify(g)),C.append("coverImage",x);try{await u(C).unwrap(),R.success("Blog created successfully!"),i(""),c(""),f(""),d(!1),m(null),r&&r()}catch(s){R.error(s?.data?.message||"Error creating blog")}};return e.jsxs(Y,{className:"dark:bg-gray-800",children:[e.jsx(Z,{children:e.jsx(W,{className:"text-2xl",children:"Create Blog"})}),e.jsx(ee,{children:e.jsxs("form",{className:"space-y-4",onSubmit:v,children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"title",children:"Title"}),e.jsx(P,{id:"title",value:o,onChange:a=>i(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"content",children:"Content"}),e.jsx(te,{id:"content",value:l,onChange:a=>c(a.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"tags",children:"Tags (comma separated)"}),e.jsx(P,{id:"tags",value:t,onChange:a=>f(a.target.value)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{id:"published",checked:b,onCheckedChange:a=>d(!!a)}),e.jsx(j,{htmlFor:"published",children:"Published"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"coverImage",children:"Cover Image"}),e.jsx(P,{id:"coverImage",type:"file",accept:"image/*",onChange:a=>{a.target.files&&m(a.target.files[0])},required:!0})]}),e.jsx(re,{type:"submit",disabled:h,children:h?"Creating...":"Create Blog"})]})})]})};export{le as default};
