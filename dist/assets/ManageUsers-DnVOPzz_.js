import{m as I,r as T,j as e,C as r,c as L,U as i,d as D,w as K,e as t,K as o,L as j,P as O,B as M,t as m,G as x}from"./index-BBuOKhOY.js";import{T as S,a as V,b as N,c as n,d as _,e as l}from"./table-eIJgPObw.js";import{L as $}from"./Loading-DM7GQaaP.js";import{c as R,d as F,e as H}from"./user.api-CT_1wEuk.js";import{U as f,a as b}from"./user-x-Bh0uYHZ1.js";import{C as u}from"./crown-CK9R4WFM.js";import{C as P}from"./calendar-CgCT8WAo.js";/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]],z=I("shield-off",G);function ee(){const{data:a,isLoading:p}=R(void 0),[v]=F(),[w]=H(),[h,g]=T.useState(null),y=async s=>{const d=s.isActive;if(s.role==="ADMIN"){m.error("You cannot block or unblock an admin user");return}g(s?._id||null);try{d==="ACTIVE"?(await v({phone:s.phone}),m.success(`User ${s.phone} status changed from ${d} to BLOCKED`)):(await w({phone:s.phone}),m.success(`User ${s.phone} status changed from BLOCKED to ${d}`))}catch{m.error("Something went wrong")}finally{g(null)}},A=s=>{const c={ACTIVE:{variant:"default",icon:f,className:"bg-green-500/10 text-green-600 dark:text-green-400 border-green-500/20 hover:bg-green-500/20"},INACTIVE:{variant:"secondary",icon:b,className:"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border-yellow-500/20 hover:bg-yellow-500/20"},BLOCKED:{variant:"destructive",icon:o,className:"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20 hover:bg-red-500/20"}}[s]||{variant:"outline",icon:j,className:""},E=c.icon;return e.jsxs(x,{variant:c.variant,className:`${c.className} font-medium flex items-center gap-1 w-fit`,children:[e.jsx(E,{className:"h-3 w-3"}),s]})},U=s=>s==="ADMIN"?e.jsxs(x,{className:"bg-purple-500/10 text-purple-600 dark:text-purple-400 border-purple-500/20 hover:bg-purple-500/20 font-medium flex items-center gap-1 w-fit",children:[e.jsx(u,{className:"h-3 w-3"}),s]}):e.jsx(x,{variant:"outline",className:"font-medium",children:s||"N/A"});if(p)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx($,{})});if(!a?.data||a.data.length===0)return e.jsx("div",{className:"p-6 min-h-screen bg-background",children:e.jsxs(r,{className:"max-w-2xl mx-auto border-border",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-lg bg-primary/10",children:e.jsx(i,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx(D,{className:"text-2xl text-foreground",children:"Manage Users"}),e.jsx(K,{children:"No users found in the system"})]})]})}),e.jsx(t,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(i,{className:"h-16 w-16 text-muted-foreground/30 mb-4"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"No users available to display"})]})})]})});const C=a.data.filter(s=>s.isActive==="ACTIVE").length,k=a.data.filter(s=>s.isActive==="BLOCKED").length,B=a.data.filter(s=>s.isActive==="INACTIVE").length;return e.jsxs("div",{className:"p-6 min-h-screen bg-background space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500",children:e.jsx(i,{className:"h-6 w-6 text-white"})}),"Manage Users"]}),e.jsx("p",{className:"text-muted-foreground",children:"View and manage all registered users in the system"})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(r,{className:"bg-card border-border hover:shadow-lg transition-all duration-300",children:e.jsx(t,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-foreground mt-1",children:a.data.length})]}),e.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500",children:e.jsx(i,{className:"h-5 w-5 text-white"})})]})})}),e.jsx(r,{className:"bg-card border-border hover:shadow-lg transition-all duration-300",children:e.jsx(t,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:C})]}),e.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-green-500 to-emerald-500",children:e.jsx(f,{className:"h-5 w-5 text-white"})})]})})}),e.jsx(r,{className:"bg-card border-border hover:shadow-lg transition-all duration-300",children:e.jsx(t,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Inactive Users"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:B})]}),e.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-yellow-500 to-amber-500",children:e.jsx(b,{className:"h-5 w-5 text-white"})})]})})}),e.jsx(r,{className:"bg-card border-border hover:shadow-lg transition-all duration-300",children:e.jsx(t,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Blocked Users"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mt-1",children:k})]}),e.jsx("div",{className:"p-3 rounded-lg bg-gradient-to-br from-red-500 to-rose-500",children:e.jsx(o,{className:"h-5 w-5 text-white"})})]})})})]}),e.jsx(r,{className:"bg-card border-border shadow-lg",children:e.jsx(t,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(S,{children:[e.jsx(V,{children:e.jsxs(N,{className:"border-border hover:bg-transparent",children:[e.jsx(n,{className:"text-foreground font-semibold",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4"}),"Name"]})}),e.jsx(n,{className:"text-foreground font-semibold",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),"Phone"]})}),e.jsx(n,{className:"text-foreground font-semibold",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),"Role"]})}),e.jsx(n,{className:"text-foreground font-semibold",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"h-4 w-4"}),"Status"]})}),e.jsx(n,{className:"text-foreground font-semibold",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),"Joined"]})}),e.jsx(n,{className:"text-foreground font-semibold",children:"Action"})]})}),e.jsx(_,{children:a.data.map(s=>e.jsxs(N,{className:"border-border hover:bg-accent/50 transition-colors",children:[e.jsx(l,{className:"font-medium text-foreground",children:s.name||"N/A"}),e.jsx(l,{className:"text-muted-foreground",children:s.phone||"N/A"}),e.jsx(l,{children:U(s.role)}),e.jsx(l,{children:A(s.isActive||"UNKNOWN")}),e.jsx(l,{className:"text-muted-foreground",children:s?.createdAt?new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}),e.jsx(l,{children:e.jsx(M,{size:"sm",variant:s.isActive==="BLOCKED"?"outline":"destructive",onClick:()=>y(s),disabled:h===s._id||!s.phone||s.isActive!=="ACTIVE"&&s.isActive!=="BLOCKED",className:`gap-2 ${s.isActive==="BLOCKED"?"hover:bg-green-500/10 hover:text-green-600 dark:hover:text-green-400 hover:border-green-500/50":""}`,children:h===s._id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Updating..."]}):s.isActive==="BLOCKED"?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"h-3 w-3"}),"Unblock"]}):s.isActive==="ACTIVE"?e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"h-3 w-3"}),"Block"]}):"N/A"})})]},s._id))})]})})})})]})}export{ee as default};
