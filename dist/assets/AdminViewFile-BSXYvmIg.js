import{m as De,j as e,r as o,a1 as J,a2 as Ae,R as K,a3 as we,M as Ce,a4 as be,T as Te,a5 as Se,a6 as Ee,a7 as Q,a8 as Ie,a9 as _e,aa as ke,Y as h,ab as X,ac as Re,ad as Oe,ae as Pe,af as E,G as v,B as x,ag as Be,ah as U,ai as z,aj as G,ak as H,al as W,am as Me,v as Fe,$ as D,I,a0 as Le,an as $e,ao as Ve,t as A}from"./index-DTLdg1Qi.js";import{T as Ue,a as ze,b as Y,c as f,d as Ge,e as N}from"./table-Bis0MdCm.js";import{S as q}from"./square-pen-A-aWo4ud.js";/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],We=De("trash-2",He);var Ye=Symbol("radix.slottable");function qe(t){const s=({children:l})=>e.jsx(e.Fragment,{children:l});return s.displayName=`${t}.Slottable`,s.__radixId=Ye,s}var Z="AlertDialog",[Je,ba]=Ce(Z,[J]),m=J(),ee=t=>{const{__scopeAlertDialog:s,...l}=t,n=m(s);return e.jsx(Ae,{...n,...l,modal:!0})};ee.displayName=Z;var Ke="AlertDialogTrigger",Qe=o.forwardRef((t,s)=>{const{__scopeAlertDialog:l,...n}=t,c=m(l);return e.jsx(ke,{...c,...n,ref:s})});Qe.displayName=Ke;var Xe="AlertDialogPortal",ae=t=>{const{__scopeAlertDialog:s,...l}=t,n=m(s);return e.jsx(Ie,{...n,...l})};ae.displayName=Xe;var Ze="AlertDialogOverlay",te=o.forwardRef((t,s)=>{const{__scopeAlertDialog:l,...n}=t,c=m(l);return e.jsx(_e,{...c,...n,ref:s})});te.displayName=Ze;var y="AlertDialogContent",[ea,aa]=Je(y),ta=qe("AlertDialogContent"),se=o.forwardRef((t,s)=>{const{__scopeAlertDialog:l,children:n,...c}=t,j=m(l),i=o.useRef(null),w=K(s,i),C=o.useRef(null);return e.jsx(we,{contentName:y,titleName:le,docsSlug:"alert-dialog",children:e.jsx(ea,{scope:l,cancelRef:C,children:e.jsxs(be,{role:"alertdialog",...j,...c,ref:w,onOpenAutoFocus:Te(c.onOpenAutoFocus,g=>{g.preventDefault(),C.current?.focus({preventScroll:!0})}),onPointerDownOutside:g=>g.preventDefault(),onInteractOutside:g=>g.preventDefault(),children:[e.jsx(ta,{children:n}),e.jsx(la,{contentRef:i})]})})})});se.displayName=y;var le="AlertDialogTitle",re=o.forwardRef((t,s)=>{const{__scopeAlertDialog:l,...n}=t,c=m(l);return e.jsx(Se,{...c,...n,ref:s})});re.displayName=le;var ne="AlertDialogDescription",oe=o.forwardRef((t,s)=>{const{__scopeAlertDialog:l,...n}=t,c=m(l);return e.jsx(Ee,{...c,...n,ref:s})});oe.displayName=ne;var sa="AlertDialogAction",ie=o.forwardRef((t,s)=>{const{__scopeAlertDialog:l,...n}=t,c=m(l);return e.jsx(Q,{...c,...n,ref:s})});ie.displayName=sa;var ce="AlertDialogCancel",de=o.forwardRef((t,s)=>{const{__scopeAlertDialog:l,...n}=t,{cancelRef:c}=aa(ce,l),j=m(l),i=K(s,c);return e.jsx(Q,{...j,...n,ref:i})});de.displayName=ce;var la=({contentRef:t})=>{const s=`\`${y}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${y}\` by passing a \`${ne}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${y}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return o.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},ra=ee,na=ae,oa=te,ia=se,ca=ie,da=de,ga=re,ma=oe;function ua({...t}){return e.jsx(ra,{"data-slot":"alert-dialog",...t})}function xa({...t}){return e.jsx(na,{"data-slot":"alert-dialog-portal",...t})}function ha({className:t,...s}){return e.jsx(oa,{"data-slot":"alert-dialog-overlay",className:h("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function pa({className:t,...s}){return e.jsxs(xa,{children:[e.jsx(ha,{}),e.jsx(ia,{"data-slot":"alert-dialog-content",className:h("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s})]})}function ja({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-header",className:h("flex flex-col gap-2 text-center sm:text-left",t),...s})}function va({className:t,...s}){return e.jsx("div",{"data-slot":"alert-dialog-footer",className:h("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function fa({className:t,...s}){return e.jsx(ga,{"data-slot":"alert-dialog-title",className:h("text-lg font-semibold",t),...s})}function Na({className:t,...s}){return e.jsx(ma,{"data-slot":"alert-dialog-description",className:h("text-muted-foreground text-sm",t),...s})}function ya({className:t,...s}){return e.jsx(ca,{className:h(X(),t),...s})}function Da({className:t,...s}){return e.jsx(da,{className:h(X({variant:"outline"}),t),...s})}const Ta=()=>{const{data:t,isLoading:s}=Re({}),[l,{isLoading:n}]=Oe(),[c,{isLoading:j}]=Pe(),[i,w]=o.useState(null),[C,g]=o.useState(!1),[ge,b]=o.useState(!1),[me,T]=o.useState(!1),[_,k]=o.useState(null),[ue,R]=o.useState(null),[r,u]=o.useState({title:"",content:"",category:"",tags:[],coverImage:null}),[S,O]=o.useState(""),[B,P]=o.useState(null),M=()=>{u({title:"",content:"",category:"",tags:[],coverImage:null}),O(""),P(null)},xe=a=>{const d=a.target.files?.[0];if(d){u({...r,coverImage:d});const p=new FileReader;p.onloadend=()=>{P(p.result)},p.readAsDataURL(d)}},F=()=>{S.trim()&&!r.tags.includes(S.trim())&&(u({...r,tags:[...r.tags,S.trim()]}),O(""))},he=a=>{u({...r,tags:r.tags.filter(d=>d!==a)})},pe=a=>{w(a),b(!0)},L=a=>{R(a),u({title:a.title,content:a.content,category:a.category||"",tags:a.tags||[],coverImage:a.coverImage||null}),P(a.coverImage||null),g(!0)},je=async()=>{if(!r.title||!r.content){A.error("Title and content are required");return}try{const a=new FormData;a.append("title",r.title),a.append("content",r.content),a.append("category",r.category),a.append("tags",JSON.stringify(r.tags)),r.coverImage instanceof File&&a.append("coverImage",r.coverImage),await l({id:ue._id,data:a}).unwrap(),A.success("Blog updated successfully!"),g(!1),R(null),M()}catch(a){A.error(a.data?.message||"Error updating blog")}},ve=a=>{k(a),T(!0)},fe=async()=>{if(_)try{await c(_).unwrap(),A.success("Blog deleted successfully!"),T(!1),k(null),i?._id===_&&w(null)}catch(a){A.error(a.data?.message||"Error deleting blog")}},$=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Ne=a=>{const p=a.split(/\s+/).length;return Math.ceil(p/200)},V=(a,d)=>a.length<=d?a:a.substring(0,d)+"...";return s?e.jsx("div",{className:"container mx-auto p-4 md:p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(E,{className:"h-12 w-full"}),e.jsx(E,{className:"h-12 w-full"}),e.jsx(E,{className:"h-12 w-full"}),e.jsx(E,{className:"h-12 w-full"})]})}):e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"container mx-auto p-4 md:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent mb-2",children:"Blog Management"}),e.jsx("p",{className:"text-muted-foreground",children:"View, edit, and manage your blog articles"})]}),t?.data?.length===0?e.jsx("div",{className:"text-center py-12 border rounded-lg bg-card",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"text-muted-foreground mb-4",children:e.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No Articles Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Create your first blog article to get started!"})]})}):e.jsx("div",{className:"border rounded-lg bg-card",children:e.jsxs(Ue,{children:[e.jsx(ze,{children:e.jsxs(Y,{children:[e.jsx(f,{className:"w-[50px]",children:"#"}),e.jsx(f,{children:"Title"}),e.jsx(f,{className:"hidden md:table-cell",children:"Category"}),e.jsx(f,{className:"hidden lg:table-cell",children:"Tags"}),e.jsx(f,{className:"hidden sm:table-cell",children:"Date"}),e.jsx(f,{className:"text-right",children:"Actions"})]})}),e.jsx(Ge,{children:t?.data?.map((a,d)=>e.jsxs(Y,{children:[e.jsx(N,{className:"font-medium",children:d+1}),e.jsx(N,{children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("p",{className:"font-medium text-foreground",children:V(a.title,50)}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:V(a.content,60)})]})}),e.jsx(N,{className:"hidden md:table-cell",children:e.jsx(v,{variant:"secondary",children:a.category||"General"})}),e.jsx(N,{className:"hidden lg:table-cell",children:e.jsxs("div",{className:"flex flex-wrap gap-1 max-w-xs",children:[a.tags?.slice(0,2).map((p,ye)=>e.jsx(v,{variant:"outline",className:"text-xs",children:p},ye)),a.tags?.length>2&&e.jsxs(v,{variant:"outline",className:"text-xs",children:["+",a.tags.length-2]})]})}),e.jsx(N,{className:"hidden sm:table-cell text-sm text-muted-foreground",children:$(a.createdAt||a.updatedAt)}),e.jsx(N,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>pe(a),title:"View details",children:e.jsx(Be,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>L(a),title:"Edit blog",children:e.jsx(q,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>ve(a._id),title:"Delete blog",children:e.jsx(We,{className:"h-4 w-4 text-destructive"})})]})})]},a._id))})]})})]}),e.jsx(U,{open:ge,onOpenChange:b,children:e.jsx(z,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:i&&e.jsxs(e.Fragment,{children:[e.jsxs(G,{children:[e.jsx(H,{className:"text-2xl",children:i.title}),e.jsxs(W,{className:"flex items-center gap-4 mt-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Me,{className:"h-4 w-4"}),$(i.createdAt||i.updatedAt)]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Fe,{className:"h-4 w-4"}),Ne(i.content)," min read"]})]})]}),i.coverImage&&e.jsx("div",{className:"relative mt-4",children:e.jsx("img",{src:i.coverImage,alt:i.title,className:"w-full h-64 md:h-80 object-cover rounded-lg"})}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-foreground",children:"Category"}),e.jsx(v,{variant:"secondary",children:i.category||"General"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-foreground",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.tags?.map((a,d)=>e.jsx(v,{variant:"secondary",children:a},d))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3 text-foreground",children:"Content"}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx("p",{className:"whitespace-pre-wrap leading-relaxed text-foreground",children:i.content})})]}),e.jsxs("div",{className:"pt-4 border-t flex justify-end gap-2",children:[e.jsxs(x,{variant:"outline",onClick:()=>{L(i),b(!1)},children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsx(x,{variant:"outline",onClick:()=>b(!1),children:"Close"})]})]})]})})}),e.jsx(U,{open:C,onOpenChange:g,children:e.jsxs(z,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(G,{children:[e.jsx(H,{children:"Edit Blog"}),e.jsx(W,{children:"Update the blog article details"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"edit-title",children:"Title *"}),e.jsx(I,{id:"edit-title",placeholder:"Enter blog title",value:r.title,onChange:a=>u({...r,title:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"edit-category",children:"Category"}),e.jsx(I,{id:"edit-category",placeholder:"e.g., Technology, Lifestyle",value:r.category,onChange:a=>u({...r,category:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"edit-content",children:"Content *"}),e.jsx(Le,{id:"edit-content",placeholder:"Write your blog content here...",rows:8,value:r.content,onChange:a=>u({...r,content:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"edit-tags",children:"Tags"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{id:"edit-tags",placeholder:"Add a tag",value:S,onChange:a=>O(a.target.value),onKeyPress:a=>{a.key==="Enter"&&(a.preventDefault(),F())}}),e.jsx(x,{type:"button",onClick:F,children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:r.tags.map((a,d)=>e.jsxs(v,{variant:"secondary",className:"gap-1",children:[a,e.jsx($e,{className:"h-3 w-3 cursor-pointer",onClick:()=>he(a)})]},d))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"edit-coverImage",children:"Cover Image"}),e.jsx(I,{id:"edit-coverImage",type:"file",accept:"image/*",onChange:xe}),B&&e.jsx("div",{className:"relative mt-2",children:e.jsx("img",{src:B,alt:"Preview",className:"w-full h-48 object-cover rounded-lg"})})]})]}),e.jsxs(Ve,{children:[e.jsx(x,{variant:"outline",onClick:()=>{g(!1),R(null),M()},children:"Cancel"}),e.jsx(x,{onClick:je,disabled:n,children:n?"Updating...":"Update Blog"})]})]})}),e.jsx(ua,{open:me,onOpenChange:T,children:e.jsxs(pa,{children:[e.jsxs(ja,{children:[e.jsx(fa,{children:"Are you absolutely sure?"}),e.jsx(Na,{children:"This action cannot be undone. This will permanently delete the blog article and remove it from our servers."})]}),e.jsxs(va,{children:[e.jsx(Da,{onClick:()=>{T(!1),k(null)},children:"Cancel"}),e.jsx(ya,{onClick:fe,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:j,children:j?"Deleting...":"Delete"})]})]})})]})};export{Ta as default};
