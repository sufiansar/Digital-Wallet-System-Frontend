import{r as p,j as e,B as b,t as i}from"./index-CcoH4oKZ.js";import{T as A,a as f,b as r,c as n,d as N,e as a}from"./table-93iw7Hw7.js";import{L as d}from"./Loading-CydpJtcl.js";import{c as g,d as U,e as u}from"./user.api-ieHgYxcs.js";function L(){const{data:t,isLoading:c}=g(void 0),[h]=U(),[x]=u(),[o,j]=p.useState(null),m=async s=>{const l=s.isActive;if(s.role==="ADMIN"){i.error("You cannot block or unblock an admin user");return}try{l==="ACTIVE"?(await h({phone:s.phone}),i.success(`User ${s.phone} status changed from ${l} to BLOCKED`)):(await x({phone:s.phone}),i.success(`User ${s.phone} status changed from BLOCKED to ${l}`))}catch{i.error("Something went wrong")}finally{j(null)}};return c?e.jsx(d,{}):!t?.data||t.data.length===0?e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Manage Users"}),e.jsx("p",{children:"No users found."})]}):c?e.jsx(d,{}):!t?.data||t.data.length===0?e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Manage Users"}),e.jsx("p",{children:"No users found."})]}):e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Manage Users"}),e.jsxs(A,{className:"w-full",children:[e.jsx(f,{children:e.jsxs(r,{children:[e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Phone"}),e.jsx(n,{children:"Role"}),e.jsx(n,{children:"Status"}),e.jsx(n,{children:"Joined"}),e.jsx(n,{children:"Action"})]})}),e.jsx(N,{children:t.data.map(s=>e.jsxs(r,{children:[e.jsx(a,{children:s.name||"N/A"}),e.jsx(a,{children:s.phone||"N/A"}),e.jsx(a,{children:s.role||"N/A"}),e.jsx(a,{children:e.jsx("span",{className:`px-2 py-1 rounded text-white font-medium ${s.isActive==="BLOCKED"?"bg-red-500":s.isActive==="INACTIVE"?"bg-yellow-500":"bg-green-500"}`,children:s.isActive||"UNKNOWN"})}),e.jsx(a,{children:s?.createdAt?new Date(s.createdAt).toLocaleDateString():"N/A"}),e.jsx(a,{children:e.jsx(b,{size:"sm",variant:s.isActive==="BLOCKED"?"secondary":"destructive",onClick:()=>m(s),disabled:o===s._id||!s.phone||s.isActive!=="ACTIVE"&&s.isActive!=="BLOCKED",children:o===s._id?"Updating...":s.isActive==="BLOCKED"?"Unblock":s.isActive==="ACTIVE"?"Block":"N/A"})})]},s._id))})]})]})}export{L as default};
